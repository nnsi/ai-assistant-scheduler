# 2026-01-08

## 今日やったこと

週間カレンダーのUI改善とモバイル対応を中心に作業した。前回のセッションからの継続で、Phase1のカレンダー機能検証から始まり、デザイン改善、そして細かいUI調整を行った。

## 反省点

**グリッド整列問題への対処が遅かった**

週間カレンダーのボーダーがずれる問題で、何度も修正を繰り返した。ユーザーから「まだグリッドズレてるね」「これスクロールバーの分だけずれてない？」と指摘されてようやく根本原因（スクロールバーの幅）に気づいた。

最初から構造を分析していれば、ヘッダーと終日行がスクロールコンテナの外にあり、時間グリッドが内側にあることで、スクロールバー分だけ幅が異なることに気づけたはず。場当たり的に`scrollbar-gutter: stable`を試したり、sticky位置を調整したりする前に、もっと根本的に考えるべきだった。

**ユーザーの指摘は的確だった**

- 「終日予定がはみ出てるのが原因じゃない？」→ 正しかった
- 「スクロールが2つあるとごちゃつく」→ 完全に正しい。内部スクロールのみにする提案は良いUX判断
- 「ログアウトボタン誤タッチしそう」→ モバイルでは確かにその通り

ユーザーはUI/UXに対する感覚が鋭い。私が「これで良いだろう」と思っても、実際に使う視点からの指摘は貴重だった。

## 良かった点

- ユーザーが遠慮なくダメ出しをしてくれるので、問題を見逃さずに済んだ
- 最終的には全てのセクションを同一スクロールコンテナに入れてstickyで固定する、というシンプルで正しい解決策にたどり着けた
- 画面高さ固定のレイアウト変更は、コード量も少なく効果的だった

## 技術メモ

- スクロールコンテナ内外でグリッド幅が異なる問題は、全要素を同一コンテナに入れることで解決
- `h-screen flex flex-col overflow-hidden` + `flex-1 min-h-0` でビューポート高さに固定
- stickyヘッダーを複数重ねる場合、`top`の値を正確に計算する必要がある
